/* Custom Scrollbar Styles */
/* Theme-aware using CSS variables */
.messages::-webkit-scrollbar, .sidebar::-webkit-scrollbar, .content::-webkit-scrollbar {
	width: 10px;
	background: var(--scrollbar-bg);
}
.messages::-webkit-scrollbar-thumb, .sidebar::-webkit-scrollbar-thumb, .content::-webkit-scrollbar-thumb {
	background: var(--scrollbar-thumb);
	border-radius: 8px;
	border: 2px solid var(--scrollbar-bg);
}
.messages::-webkit-scrollbar-thumb:hover, .sidebar::-webkit-scrollbar-thumb:hover, .content::-webkit-scrollbar-thumb:hover {
	background: var(--scrollbar-thumb-hover, var(--scrollbar-thumb));
}
/* Firefox */
.messages, .sidebar, .content {
	scrollbar-width: thin;
	scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-bg);
}
:root {
	--sidebar-width: 350px;
	--topbar-height: 56px;
	--gap: 12px;
	--radius: 12px;
	--content-max: 1000px; /* shared max width for messages + input */

	/* Fonts */
	--font-ui: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
	--font-accent: "Plus Jakarta Sans", Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

	/* Light mode defaults (overridden by JS when toggled) */
	--bg: #FFFFFF;                 /* Background (main) */
	--container-bg: #f8f8f8;       /* Chat container background */
	--sidebar-bg: #F3F4F6;         /* Sidebar background */
	--sidebar-text: #111827;       /* Sidebar text */
	--panel: var(--sidebar-bg);    /* Back-compat */
	--text: #111827;               /* Neutral text */
	--text-secondary: #6B7280;     /* Secondary text */
	--accent-primary: #2563EB;     /* Primary Accent */
	--accent-primary-hover: #1D4ED8; /* Darker primary on hover */
	--accent-secondary: #9333EA;   /* Secondary Accent */
	--border: #D1D5DB;             /* Borders / dividers */
	--bubble-user-bg: var(--accent-primary);
	--bubble-user-text: #FFFFFF;
	--bubble-bot-bg: #E5E7EB;      /* Bot messages */
	--bubble-bot-text: #111827;
	--accent-primary-10: rgba(37, 99, 235, 0.1); /* Selected chat */
	--input-bg: #FFFFFF;           /* Input area */
	--input-border: #D1D5DB;
	--sidebar-card-bg: #FFFFFF;    /* Sidebar cards */
	--sidebar-card-bg-hover: #F3F4F6;
	/* Scrollbar variables (light defaults) */
	--scrollbar-thumb: #D1D5DB;
	--scrollbar-thumb-hover: #BFC6D1;
	--scrollbar-bg: var(--container-bg);
	/* Sidebar shadow (light default) */
	--sidebar-shadow: 4px 0 8px rgba(0,0,0,0.05);
	/* Settings panel background */
	--settings-bg: #fff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
	margin: 0;
	font-family: var(--font-ui);
	color: var(--text);
	background: var(--bg);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

/* Top bar */
.topbar {
	position: fixed;
	inset: 0 0 auto 0;
	height: var(--topbar-height);
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 0 12px;
	background: transparent;
	z-index: 35; /* above sidebar */
}
.title { font-size: 16px; font-weight: 600; margin: 0; }
 .user-logo {
	background: var(--sidebar-card-bg);
	color: var(--sidebar-text);
	border: none;
	width: 56px; height: 56px; /* bigger button */
	display: grid; place-items: center;
	border-radius: 16px; /* more rounded */
	border: 1px solid var(--border); /* subtle grey outline */
	cursor: pointer;
	font-size: 18px;
	z-index: 40; /* above sidebar */
	position: relative;
	margin-top: 12px;
	transition: background 0.2s, color 0.2s;
}
 .user-logo img {
	width: 34px !important;
	height: 34px !important;
	display: block;
	filter: none;
	transition: none !important;
}
.user-logo:hover { background: var(--accent-primary-10); }
/* Scale the icon inside the top-left user button */
.user-logo img { width: 34px !important; height: 34px !important; display: block; }
.user-logo img { width: 34px !important; height: 34px !important; display: block; filter: none; }
/* SVG color for theme (if using inline SVG) */
.user-logo svg { color: var(--sidebar-text); }


/* Sidebar */
.sidebar {
	position: fixed;
	top: 0; /* cover entire vertical length, including the topbar area */
	left: 0;
	width: var(--sidebar-width);
	bottom: 0;
	background: var(--sidebar-bg);
	border-right: none;
	box-shadow: var(--sidebar-shadow);
	transform: translateX(-100%);
	transition: transform 240ms ease;
	z-index: 30;
	display: flex; flex-direction: column;
}
.sidebar.open { transform: translateX(0); }
.sidebar-header {
	padding: 16px 55px;
	border-bottom: none;
	font-weight: 1000;
	display: flex;
	align-items: center;
	gap: 10px;
    font-size: 1.5rem;
	font-family: var(--font-accent);
}
.sidebar-header span {
	margin-left: 20px;
	font-weight: 600;
	color: var(--sidebar-text);
}
.sidebar-content { padding: 8px; display: grid; gap: 6px; }
.sidebar-link {
	color: var(--text);
	text-decoration: none;
	padding: 10px 12px;
	border-radius: 8px;
	border: none;
}
.sidebar-link:hover { background: #0e1520; }

.user-list {
	padding: 8px;
	display: grid;
	gap: 1rem; /* consistent gap between cards */
	margin-top: 32px; /* move list lower */
}
.user-card {
	display: flex;
	align-items: center;
	gap: 0.75rem; /* increased space between icon and text */
	padding: 1rem 1.25rem; /* 16px 20px */
	border-radius: 16px; /* align to 8px multiples */
	border: 1px solid var(--border);
	background: var(--sidebar-card-bg);
	color: var(--sidebar-text);
	cursor: pointer;
}
.user-card:hover { background: var(--sidebar-card-bg-hover); }
.user-card.selected { background: var(--accent-primary-10); }
.user-avatar {
	width: 40px; height: 40px;
	display: grid; place-items: center;
	border-radius: 50%;
    background: transparent;
    padding: 0;
}
.user-avatar-img {
    width: 32px;
    height: 32px;
    display: block;
    object-fit: contain;
}
.user-name { font-weight: 600; font-size: 1.05rem; }

/* Sidebar footer with gear */
.sidebar-footer {
	margin-top: auto;
	position: relative;
	padding: 10px 12px;
	display: flex;
	justify-content: flex-start; /* bottom-left */
}
 .settings-panel {
	position: relative;
	display: flex;
	align-items: center;
	gap: 14px; /* more gap, room for future buttons */
	background: var(--settings-bg);
	color: var(--sidebar-text);
	border-radius: 16px; /* more rounded */
	border: 1px solid var(--border); /* subtle grey outline */
	height: 56px; /* match user button height for parity */
	padding: 10px 12px;
	overflow: hidden; /* hide buttons until expanded */
	width: 56px; /* collapsed width equals gear */
	transition: width 240ms ease, background 200ms ease;
}
.settings-panel.open {
	width: calc(100% - 24px); /* expand across available space */
}
 .settings-item {
	width: 56px;
	height: 56px;
	border-radius: 16px; /* more rounded */
	border: none;
	background: transparent; /* transparent so the whole bar reads as one white piece */
	color: var(--sidebar-text);
	cursor: pointer;
	flex: 0 0 auto;
	display: grid;
	place-items: center;
	transition: background 0.2s, color 0.2s, filter 0.2s;
}
.settings-item:hover { background: transparent; }
.gear-item {
	background: transparent;
	color: var(--sidebar-text);
	font-size: 20px;
	margin-left: 0; /* center gear within squared panel */
}
.gear-item img {
    margin-left: -25px;
}
.settings-item img { width: 34px; height: 34px; display: block; }
.placeholder-dot { width: 14px; height: 14px; background: #4b5563; border-radius: 50%; display: block; }

/* Content */
.content {
	position: fixed;
	top: var(--topbar-height);
	left: 0; right: 0;
	bottom: 72px; /* reserved for input bar */
	overflow: auto;
	padding: 2rem; /* more breathing room */
	background: var(--container-bg);
	transition: left 240ms ease;
}
.messages {
	display: grid;
	gap: 16px; /* 8px multiple */
	width: min(100%, var(--content-max));
	margin: 16px auto; /* equal spacing above first message and below input edge */
	padding: 0 16px; /* align with grid rhythm */
}

/* Chat bubbles */
.message { display: flex; }
.message.left { justify-content: flex-start; align-items: flex-start; }
.message.right { justify-content: flex-end; align-items: flex-start; }

.message .user-bubble-logo {
	width: 36px;
	height: 36px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-top: 2px;
	flex-shrink: 0;
}
.message.left .user-bubble-logo { margin-right: 12px; }
.message.right .user-bubble-logo { margin-left: 12px; }
.bubble {
	max-width: 65%;
	padding: 0.75rem 1rem; /* 12px 16px */
	border-radius: 16px;
	line-height: 1.5;
	border: none;
	font-family: var(--font-ui);
	font-size: 15px;
}
.message.left .bubble { /* bot */
	background: var(--bubble-bot-bg);
	color: var(--bubble-bot-text);
	border-top-left-radius: 6px;
}
.message.right .bubble { /* user */
	background: var(--bubble-user-bg);
	color: var(--bubble-user-text);
	border-top-right-radius: 6px;
}

/* Typing indicator */
.typing-bubble {
	background: var(--bubble-bot-bg);
	color: var(--bubble-bot-text);
	display: inline-flex;
	align-items: center;
	gap: 6px;
}
.typing-dots { display: inline-flex; gap: 4px; }
.typing-dots .dot {
	width: 6px; height: 6px; border-radius: 50%;
	background: var(--text-secondary);
	opacity: 0.6;
	animation: typing-blink 1.2s infinite ease-in-out;
}
.typing-dots .dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dots .dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing-blink {
	0% { opacity: 0.2; transform: translateY(0); }
	50% { opacity: 1; transform: translateY(-2px); }
	100% { opacity: 0.2; transform: translateY(0); }
}

/* Input bar */
.input-bar {
	position: fixed;
	left: 0; right: 0;
	bottom: 0;
	padding: 12px 16px; /* horizontal padding that we will "lose" when sidebar opens */
	background: transparent;
	z-index: 25;
	transition: padding 200ms ease, margin-left 240ms ease;
}
.input-bar form {
	display: grid;
	grid-template-columns: 1fr auto;
	gap: 8px;
	/* Input box color */
	background: var(--input-bg);
	padding: 0.75rem 1rem; /* 12px 16px */
	border: 1px solid var(--input-border);
	border-radius: var(--radius);
	/* make the input area narrower horizontally */
	width: min(100%, var(--content-max));
	margin: 0 auto 1rem; /* leave 1rem gap from bottom */
	min-height: 50px;
}
.input-bar input[type="text"] {
	width: 100%;
	background: transparent;
	border: none;
	outline: none;
	color: var(--text);
	font-size: 14px;
	font-weight: 500;
	font-family: var(--font-ui);
}
.send-btn {
	background: var(--accent-primary);
	color: white;
	border: 0;
	padding: 10px 14px;
	border-radius: 10px;
	cursor: pointer;
	font-family: var(--font-ui);
	font-weight: 500;
	font-size: 14px;
}
.send-btn:hover { background: var(--accent-primary-hover); }

/* Timestamps or secondary text */
.timestamp { color: var(--text-secondary); font-size: 12px; }

/* When sidebar is open, push content and input to the right, and remove input padding so it fits */
body.sidebar-open .content { left: var(--sidebar-width); }
body.sidebar-open .input-bar { margin-left: var(--sidebar-width); padding-left: 0; padding-right: 0; }

/* Small screens: narrower sidebar */
@media (max-width: 480px) {
	:root { --sidebar-width: 80vw; }
}

